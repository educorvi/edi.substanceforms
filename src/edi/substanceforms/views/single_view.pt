<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="example.conference">
<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

      <div class="container"
	   id="main-content"
	   tal:define="article view/article">

        <div class="row">
          <span class="col-12" tal:content="structure provider:plone.abovecontenttitle" />
        </div>

        <div class="row">

          <div class="col-lg-9 col-12">
            <div class="row">
              <div class="col-7">
                <h1 tal:content="python:article[1]"/>
              </div>
              <!--
              <div class="col-5">
                <img class="img-fluid" tal:condition="view/image_url" tal:attributes="src view/image_url">
              </div>
              -->
            </div>
	    <!--<span tal:content="structure provider:plone.belowcontenttitle" />-->
            <p tal:condition="python:article[2]" class="lead mt-5">
              <img class="icon" src="++theme++plonetheme.siguv/icons/siguv/dot.svg">
              <span tal:content="python:article[2]"/>
            </p>
            <span tal:content="structure provider:plone.abovecontentbody" />

            <!-- TODO: Hier müssen alle anderen Attribute reingeschrieben werden -->

     <article>
       <section class="article-body clearfix" tal:define="definitions view/definitions;
                                                          moredefinitions view/more_definitions">
         <dl class="row key-value-pair">
           <span tal:repeat="definition definitions" tal:replace="structure definition"/>
           <span tal:repeat="definition moredefinitions" tal:replace="structure definition"/>
         </dl>
       </section>
     </article>

      <div tal:condition="context/notice">
        <span tal:replace="structure context/notice/output"/>
      </div>

        <div tal:condition="view/userCanEdit">

          <section class="mt-3 mb-3" tal:condition="view/userCanEdit">
          <a
            class="btn btn-primary mb-3" tal:attributes="href view/edit_url"
            role="button">Artikel bearbeiten</a>
          <a
            class="btn btn-warning mb-3" tal:attributes="href view/delete_url"
            role="button">Artikel löschen</a>
          </section>

        </div>

        <div tal:condition="view/is_mixture">
            <section class="mt-3 mb-3" tal:condition="view/userCanEdit">
              <a class="btn btn-primary mb-3" tal:attributes="href python:context.absolute_url()+'/create-ingredient-form?itemid=%s' % view.itemid" role="button">Bestandteil hinzufügen</a>

              <a class="btn btn-warning mb-3" tal:attributes="href python:context.absolute_url()+'/delete-ingredients-form?itemid=%s' % view.itemid" role="button">Bestandteile löschen</a>
            </section>
            <section class="mt-3 mb-3" tal:condition="view/userCanEdit">
              <a class="btn btn-primary mb-3" tal:attributes="href python:context.absolute_url()+'/update-mixture-manufacturer-form?itemid=%s' % view.itemid" role="button">Hersteller aktualisieren</a>
            </section>
        </div>

        <div tal:condition="view/is_substance">
            <section class="mt-3 mb-3" tal:condition="view/is_substance">
              <a
                class="btn btn-primary mb-3" tal:attributes="href python:view.getRightUrl(article[14])" tal:condition="python:article[14]"
                target="_blank" role="button">Weitere Informationen (externe Gestis-Stoffdatenbank)</a>
            </section>


            <section class="mt-3 mb-3" tal:condition="view/userCanEdit">
              <a
                class="btn btn-primary mb-3" tal:attributes="href python:context.absolute_url()+'/add-synonym-form?itemid=%s' % view.itemid"
                role="button">Synonym hinzufügen</a>

              <a
                class="btn btn-warning mb-3" tal:attributes="href python:context.absolute_url()+'/delete-synonyms-form?itemid=%s' % view.itemid"
                role="button">Synonyme löschen</a>
            </section>
        </div>

        </div>

          <!-- Portlets -->
          <div class="col-lg-3 col-12">
            <div tal:replace="structure context/@@portlet-cards-view"/>
          </div>
          <!-- Ende Portlets -->

        </div>

        <div class="row">
          <span class="col-lg-9 col-12" tal:content="structure provider:nva.contentcards" />
        </div>

        <div class="row">
          <span class="col-lg-9 col-12" tal:content="structure provider:plone.belowcontentbody" />
        </div>

      </div>

      <script>
        $(document).ready(function () {
          $('#wtform-item_id').parents('.form-group').hide();
        });
      </script>

    </tal:main-macro>
</metal:main>

</body>
</html>
